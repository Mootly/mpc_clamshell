class mpc_clamshell{constructor(t=".clamshell, dl.example-box",s="dl.clamshell>dt, .clamheader",e="dl.clamshell>dd, .clamfold",i=null,l=null,a=null,h=null,c="hidden",d="show",o=!0){this.headerIdx=1,this.ico_family=i,this.ico_showall=l,this.ico_open=a,this.ico_closed=h,this.tar_list=t,this.arr_list=t.split(/,\s*/),this.arr_fold=e.split(/,\s*/),this.arr_label=s.split(/,\s*/),this.tar_fold=this.arr_list.map((t=>this.arr_fold.map((s=>t+" "+s)))).join(","),this.tar_label=this.arr_list.map((t=>this.arr_label.map((s=>t+" "+s)))).join(","),this.class_hidden=c,window.addEventListener("DOMContentLoaded",(t=>{this.cs_list=document.querySelectorAll(this.tar_list),this.cs_list?.forEach((t=>{let s=t.classList.toString(),e=s.match(/use-h\d/)?.toString().slice(-2);if(e){let s=t.querySelectorAll(e);s?.forEach((t=>{t.classList.add("clamheader"),t.setAttribute("tabindex","0")}))}})),window.addEventListener("mousedown",(()=>{this.mouseTrigger=!0})),window.addEventListener("mouseup",(()=>{this.mouseTrigger=!1})),this.cs_block=document.querySelectorAll(this.tar_fold),this.cs_label=document.querySelectorAll(this.tar_label),o&&this.setStates()}))}setStates(){this.setLabelIds(),this.closeAll(),this.addListHeaders(),this.checkHash(),window.addEventListener("hashchange",(t=>{this.checkHash()})),this.cs_label.forEach((t=>{t.addEventListener("click",(t=>{this.checkClick(t.target.closest(this.tar_label))})),t.addEventListener("focusin",(t=>{this.mouseTrigger||this.checkClick(t.target.closest(this.tar_label))})),t.addEventListener("focusout",(t=>{this.mouseTrigger||this.checkClick(t.target.closest(this.tar_label))})),this.cs_block.forEach((t=>{t.addEventListener("focusin",(t=>{let s=t.target.closest(this.tar_fold).previousElementSibling;this.mouseTrigger||this.checkClick(s,"Show ")})),t.addEventListener("focusout",(t=>{let s=t.target.closest(this.tar_fold).previousElementSibling;this.mouseTrigger||this.checkClick(s,"Hide ")}))}))}))}setLabelIds(){let t="";this.cs_label&&this.cs_label.forEach((s=>{if(!s.textContent)return!1;t=s.textContent||"",s.hasAttribute("id")||(s.id="clam-"+this.headerIdx+++"-"+t.replace(/[`~!@#$%^&*()|+=?;'",.<>{}[\]\\/]/gi,"").trim().replace(/ /g,"-").substring(0,24))}))}closeAll(){this.cs_block?.forEach((t=>{t.classList.add(this.class_hidden)})),this.cs_label?.forEach((t=>{let s=document.createElement("span");s.className="reader-only",s.textContent="Show ",t.prepend(s),t.classList.add(this.ico_family),t.classList.add(this.ico_closed)}))}addListHeaders(){this.cs_list?.forEach((t=>{let s;s="dl"===t.nodeName?.toLowerCase()?document.createElement("dt"):document.createElement("div"),s.className="list-header "+this.ico_family+" "+this.ico_showall;let e=t.id+"-header";"-header"==e&&(e="clam-"+this.headerIdx+++e),s.id=e,s.textContent="Show All",t.setAttribute("tabindex","0"),t.prepend(s),document.getElementById(s.id)?.addEventListener("click",(t=>{this.checkAll(t.target)}))}))}checkHash(){if(this.cs_list&&location.hash){if(this.tar_hash=document.getElementById(location.hash.substring(1)),this.tar_hash?.matches(this.tar_label)){if(this.tar_hash.nextElementSibling){this.tar_hash.nextElementSibling.classList.remove(this.class_hidden),this.tar_hash.classList.remove(this.ico_closed),this.tar_hash.classList.add(this.ico_open)}"reader-only"==this.tar_hash.firstElementChild?.className&&(this.tar_hash.firstElementChild.textContent="Hide ")}if(this.tar_hash?.closest(this.tar_fold)){let t=this.tar_hash?.closest(this.tar_fold),s=t?.previousElementSibling;t.classList.remove(this.class_hidden),s.classList.remove(this.ico_closed),s.classList.add(this.ico_open),"reader-only"==s.firstElementChild?.className&&(s.firstElementChild.textContent="Hide ")}}}checkClick(t,s=""){if(t.matches(this.tar_label)&&t.nextElementSibling){let e=t.nextElementSibling;"Hide "==s?e.classList.add(this.class_hidden):"Show "==s?e.classList.remove(this.class_hidden):e.classList.toggle(this.class_hidden),e.classList.contains(this.class_hidden)?(t.classList.remove(this.ico_open),t.classList.add(this.ico_closed)):(t.classList.remove(this.ico_closed),t.classList.add(this.ico_open)),"reader-only"==t.firstElementChild?.className&&(e.classList.contains(this.class_hidden)?t.firstElementChild.textContent="Show ":t.firstElementChild.textContent="Hide ")}}checkAll(t){let s=t.closest(this.tar_list),e=t.textContent,i="Show All"==e?"Show ":"Hide ";if(t.textContent="Show All"==e?"Hide All":"Show All",s){let t=s.querySelectorAll(this.tar_label);t&&t.forEach((t=>{t.classList.contains("list-header")||this.checkClick(t,i)}))}}}
//# sourceMappingURL=clamshell.min.js.map
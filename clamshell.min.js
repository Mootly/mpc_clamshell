class mpc_clamshell{constructor(t=".clamshell, dl.example-box",e="dt, .clamheader",s="dd, .clamfold",i=null,l=null,a=null,h=null,c="hidden",r="show",o=!0){this.headerIdx=1,this.ico_family=i,this.ico_showall=l,this.ico_open=a,this.ico_closed=h,this.tar_list=t,this.tar_labelOnly=e,this.arr_list=t.split(/,\s*/),this.arr_fold=s.split(/,\s*/),this.arr_label=e.split(/,\s*/),this.tar_fold=this.arr_list.map((t=>this.arr_fold.map((e=>t+">"+e)))).join(","),this.tar_label=this.arr_list.map((t=>this.arr_label.map((e=>t+">"+e)))).join(","),this.class_hidden=c,window.addEventListener("DOMContentLoaded",(t=>{this.cs_list=document.querySelectorAll(this.tar_list),this.cs_list?.forEach((t=>{let e=t.classList.toString(),s=e.match(/use-h\d/)?.toString().slice(-2);if(s){let e=t.querySelectorAll(s);e?.forEach((t=>{t.classList.add("clamheader"),t.setAttribute("tabindex","0")}))}})),window.addEventListener("mousedown",(()=>{this.mouseTrigger=!0})),window.addEventListener("mouseup",(()=>{this.mouseTrigger=!1})),this.cs_block=document.querySelectorAll(this.tar_fold),this.cs_label=document.querySelectorAll(this.tar_label),o&&this.setStates()}))}setStates(){this.setLabelIds(),this.closeAll(),this.addListHeaders(),window.addEventListener("DOMContentLoaded",(t=>{this.checkHash()})),window.addEventListener("hashchange",(t=>{this.checkHash()})),this.cs_label.forEach((t=>{t.setAttribute("tabindex","0"),t.addEventListener("click",(t=>{this.checkClick(t.target.closest(this.tar_label))})),t.addEventListener("focusin",(t=>{this.mouseTrigger||this.checkClick(t.target.closest(this.tar_label))})),t.addEventListener("focusout",(t=>{this.mouseTrigger||this.checkClick(t.target.closest(this.tar_label))}))})),this.cs_block.forEach((t=>{t.setAttribute("tabindex","0"),t.addEventListener("focusin",(t=>{let e=t.target;for(;e.closest(this.tar_fold).previousElementSibling;){let t=e.closest(this.tar_fold).previousElementSibling;this.mouseTrigger||this.checkClick(t,"Show "),e=t.parentElement}})),t.addEventListener("focusout",(t=>{let e=t.target;for(;e.closest(this.tar_fold).previousElementSibling;){let t=e.closest(this.tar_fold).previousElementSibling;this.mouseTrigger||this.checkClick(t,"Hide "),e=t.parentElement}}))}))}setLabelIds(){let t="";this.cs_label&&this.cs_label.forEach((e=>{if(!e.textContent)return!1;t=e.textContent||"",e.hasAttribute("id")||(e.id="clam-"+this.headerIdx+++"-"+t.replace(/[`~!@#$%^&*()|+=?;'",.<>{}[\]\\/]/gi,"").trim().replace(/ /g,"-").substring(0,24))}))}closeAll(){this.cs_block?.forEach((t=>{t.classList.add(this.class_hidden)})),this.cs_label?.forEach((t=>{let e=document.createElement("span");e.className="reader-only",e.textContent="Show ",t.prepend(e),t.classList.add(this.ico_family),t.classList.add(this.ico_closed)}))}addListHeaders(){this.cs_list?.forEach((t=>{let e;e="dl"===t.nodeName?.toLowerCase()?document.createElement("dt"):document.createElement("div"),e.className="list-header "+this.ico_family+" "+this.ico_showall;let s=t.id+"-header";"-header"==s&&(s="clam-"+this.headerIdx+++s),e.id=s,e.textContent="Show All",e.setAttribute("tabindex","-1"),t.prepend(e),document.getElementById(e.id)?.addEventListener("click",(t=>{this.checkAll(t.target)}))}))}checkHash(){if(this.cs_list&&location.hash){if(this.tar_hash=document.getElementById(location.hash.substring(1)),this.tar_hash?.matches(this.tar_label)){if(this.tar_hash.nextElementSibling){this.tar_hash.nextElementSibling.classList.remove(this.class_hidden),this.tar_hash.classList.remove(this.ico_closed),this.tar_hash.classList.add(this.ico_open)}"reader-only"==this.tar_hash.firstElementChild?.className&&(this.tar_hash.firstElementChild.textContent="Hide ")}if(this.tar_hash?.closest(this.tar_fold)){let t=this.tar_hash?.closest(this.tar_fold),e=t?.previousElementSibling;t.classList.remove(this.class_hidden),e.classList.remove(this.ico_closed),e.classList.add(this.ico_open),"reader-only"==e.firstElementChild?.className&&(e.firstElementChild.textContent="Hide ")}}}checkClick(t,e=""){if(t.matches(this.tar_label)&&t.nextElementSibling){let s=t.nextElementSibling;"Hide "==e?s.classList.add(this.class_hidden):"Show "==e?s.classList.remove(this.class_hidden):s.classList.toggle(this.class_hidden),s.classList.contains(this.class_hidden)?(t.classList.remove(this.ico_open),t.classList.add(this.ico_closed)):(t.classList.remove(this.ico_closed),t.classList.add(this.ico_open)),"reader-only"==t.firstElementChild?.className&&(s.classList.contains(this.class_hidden)?t.firstElementChild.textContent="Show ":t.firstElementChild.textContent="Hide ")}}checkAll(t){let e=t.closest(this.tar_list),s=t.textContent,i="Show All"==s?"Show ":"Hide ";if(t.textContent="Show All"==s?"Hide All":"Show All",e){let t=Array.prototype.filter.call(e.children,(t=>t.matches(this.tar_labelOnly)));t&&t.forEach((t=>{t.classList.contains("list-header")||this.checkClick(t,i)}))}}}
//# sourceMappingURL=clamshell.min.js.map